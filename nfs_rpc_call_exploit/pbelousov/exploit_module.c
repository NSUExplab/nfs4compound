#include <linux/module.h>
#include <linux/init.h>
#include <linux/sunrpc/sched.h> 	//rpc_run_task
#include <linux/namei.h>		//path walk
#include <linux/path.h>
#include <linux/nfs3.h>
#include <linux/nfs4.h>
#include <linux/nfs.h>
#include <linux/nfs_fs.h>
//#include "linux/nfs_fs_sb.h"		//nfs_server

static int __init nfs_rpc_exploit_init(void)
{
	int err;
	struct path path;
	struct nfs_server *server;
	char file_name[] = "/mnt/temp_file";

	err = kern_path(file_name, LOOKUP_FOLLOW, &path);
	if (err) {
		printk("file not founded\n");
		return err; 
	}

	server = NFS_SERVER((path.dentry)->d_inode);


	return 0;
}

static void __exit nfs_rpc_exploit_exit(void)
{

}

module_init(nfs_rpc_exploit_init);
module_exit(nfs_rpc_exploit_exit);